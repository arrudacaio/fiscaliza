{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arrud\\\\fiscaliza\\\\src\\\\pages\\\\Despesas\\\\index.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../../services/api';\nimport './styles.css';\nexport default function Despesas() {\n  const [deputado, setDeputado] = useState('');\n  const [img, setImg] = useState('');\n  const [id, setId] = useState('');\n  const [partido, setPartido] = useState('');\n  const [gastos, setGastos] = useState();\n\n  function somaValores(lista) {\n    var total = 0;\n\n    for (var i = 0; i < lista.length; i++) {\n      total += lista[i];\n    }\n\n    return total;\n  }\n\n  const getDeputado = async e => {\n    try {\n      e.preventDefault();\n      const user = e.target.elements.deputado.value;\n      const ano = e.target.elements.ano.value;\n\n      if (user && ano) {\n        const res = await api.get(`?nome=${user}`);\n        const dados = res.data.dados[0];\n        const despesas = await api.get(`/${dados.id}/despesas?ano=${ano}&ordem=ASC&ordenarPor=ano`);\n        const listaDados = despesas.data.dados;\n        setId(dados.id);\n        setDeputado(dados.nome);\n        setImg(dados.urlFoto);\n        setPartido(dados.siglaPartido);\n        const gastos = listaDados.map(despesa => {\n          if (despesa.ano === Number(ano)) {\n            return despesa.valorLiquido;\n          }\n        });\n        var totalGastos = somaValores(gastos);\n        setGastos(totalGastos);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"FISCALIZA\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: getDeputado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"Despesas do Deputado:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Nome do Deputado\",\n    name: \"deputado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Ano das despesas\",\n    name: \"ano\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \"Pesquisar\"))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Despesas\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Despesas dos parlamentares com mandato em exerc\\xEDcio.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, deputado), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"Partido: \", partido), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"Despesas do Deputado em 2020:\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"R$ \", gastos)))));\n}","map":{"version":3,"sources":["C:/Users/arrud/fiscaliza/src/pages/Despesas/index.js"],"names":["React","useState","Link","api","Despesas","deputado","setDeputado","img","setImg","id","setId","partido","setPartido","gastos","setGastos","somaValores","lista","total","i","length","getDeputado","e","preventDefault","user","target","elements","value","ano","res","get","dados","data","despesas","listaDados","nome","urlFoto","siglaPartido","map","despesa","Number","valorLiquido","totalGastos","error","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,QAAsB,kBAAtB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,OAAO,cAAP;AAIA,eAAe,SAASC,QAAT,GAAmB;AAChC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,GAAD,EAAMC,MAAN,IAAiBP,QAAQ,CAAC,EAAD,CAA/B;AACA,QAAM,CAACQ,EAAD,EAAKC,KAAL,IAAcT,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBb,QAAQ,EAApC;;AAEA,WAASc,WAAT,CAAqBC,KAArB,EAA2B;AACzB,QAAIC,KAAK,GAAG,CAAZ;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,KAAK,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACnCD,MAAAA,KAAK,IAAID,KAAK,CAACE,CAAD,CAAd;AACD;;AACD,WAAOD,KAAP;AACD;;AAED,QAAMG,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/B,QAAI;AACFA,MAAAA,CAAC,CAACC,cAAF;AAEA,YAAMC,IAAI,GAAGF,CAAC,CAACG,MAAF,CAASC,QAAT,CAAkBpB,QAAlB,CAA2BqB,KAAxC;AACA,YAAMC,GAAG,GAAGN,CAAC,CAACG,MAAF,CAASC,QAAT,CAAkBE,GAAlB,CAAsBD,KAAlC;;AAEA,UAAGH,IAAI,IAAII,GAAX,EAAgB;AACd,cAAMC,GAAG,GAAG,MAAMzB,GAAG,CAAC0B,GAAJ,CAAS,SAAQN,IAAK,EAAtB,CAAlB;AACA,cAAMO,KAAK,GAAGF,GAAG,CAACG,IAAJ,CAASD,KAAT,CAAe,CAAf,CAAd;AACA,cAAME,QAAQ,GAAG,MAAM7B,GAAG,CAAC0B,GAAJ,CAAS,IAAGC,KAAK,CAACrB,EAAG,iBAAgBkB,GAAI,2BAAzC,CAAvB;AACA,cAAMM,UAAU,GAAGD,QAAQ,CAACD,IAAT,CAAcD,KAAjC;AAGApB,QAAAA,KAAK,CAACoB,KAAK,CAACrB,EAAP,CAAL;AACAH,QAAAA,WAAW,CAACwB,KAAK,CAACI,IAAP,CAAX;AACA1B,QAAAA,MAAM,CAACsB,KAAK,CAACK,OAAP,CAAN;AACAvB,QAAAA,UAAU,CAACkB,KAAK,CAACM,YAAP,CAAV;AAGA,cAAMvB,MAAM,GAAGoB,UAAU,CAACI,GAAX,CAAeC,OAAO,IAAI;AACvC,cAAGA,OAAO,CAACX,GAAR,KAAgBY,MAAM,CAACZ,GAAD,CAAzB,EAA+B;AAC7B,mBAAOW,OAAO,CAACE,YAAf;AACD;AACF,SAJc,CAAf;AAMA,YAAIC,WAAW,GAAG1B,WAAW,CAACF,MAAD,CAA7B;AACAC,QAAAA,SAAS,CAAC2B,WAAD,CAAT;AAID;AAEF,KAhCD,CAgCE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AAEF,GArCD;;AAyCA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CADF,eAIE;AAAM,IAAA,QAAQ,EAAEtB,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,WAAW,EAAC,kBAA/B;AAAkD,IAAA,IAAI,EAAC,UAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,WAAW,EAAC,kBAA/B;AAAmD,IAAA,IAAI,EAAC,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF,CAJF,CADF,eAYE;AAAK,IAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+DAFF,eAME;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEb,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,QAAL,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAaM,OAAb,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAQE,MAAR,CAJF,CAFF,CANF,CAZF,CADF;AAiCD","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link  } from 'react-router-dom';\r\nimport api from '../../services/api';\r\nimport './styles.css';\r\n\r\n\r\n\r\nexport default function Despesas(){\r\n  const [deputado, setDeputado] = useState('');\r\n  const [img, setImg ] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [partido, setPartido] = useState('');\r\n  const [gastos, setGastos] = useState();\r\n\r\n  function somaValores(lista){\r\n    var total = 0;\r\n    for(var i = 0; i < lista.length; i++){\r\n      total += lista[i];\r\n    } \r\n    return total;\r\n  }\r\n\r\n  const getDeputado = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n\r\n      const user = e.target.elements.deputado.value;\r\n      const ano = e.target.elements.ano.value;\r\n\r\n      if(user && ano) {\r\n        const res = await api.get(`?nome=${user}`);\r\n        const dados = res.data.dados[0]; \r\n        const despesas = await api.get(`/${dados.id}/despesas?ano=${ano}&ordem=ASC&ordenarPor=ano`);\r\n        const listaDados = despesas.data.dados;\r\n        \r\n\r\n        setId(dados.id);\r\n        setDeputado(dados.nome);\r\n        setImg(dados.urlFoto);\r\n        setPartido(dados.siglaPartido);\r\n        \r\n        \r\n        const gastos = listaDados.map(despesa => {\r\n          if(despesa.ano === Number(ano)){\r\n            return despesa.valorLiquido;\r\n          }\r\n        });\r\n\r\n        var totalGastos = somaValores(gastos);\r\n        setGastos(totalGastos);\r\n\r\n \r\n\r\n      }\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  return(\r\n    <>\r\n      <div className=\"sidebar\">\r\n        <Link to=\"/\">\r\n          <header>FISCALIZA</header>\r\n        </Link>\r\n        <form onSubmit={getDeputado}>\r\n          <h3>Despesas do Deputado:</h3>\r\n          <input type=\"text\" placeholder=\"Nome do Deputado\" name=\"deputado\" />\r\n          <input type=\"text\" placeholder=\"Ano das despesas\"  name=\"ano\"/>\r\n          <button type=\"submit\">Pesquisar</button>\r\n        </form>\r\n      </div>\r\n      <div class=\"content\">\r\n        <h1>Despesas</h1>\r\n        <p>\r\n          Despesas dos parlamentares com\r\n          mandato em exerc√≠cio.\r\n        </p>\r\n        <div className=\"card\">\r\n          <img src={img} />\r\n          <div className=\"card-content\">\r\n            <h1>{deputado}</h1>\r\n            <p>Partido: {partido}</p>\r\n            <h3>Despesas do Deputado em 2020:</h3>\r\n            <h2>R$ {gastos}</h2>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n    </>\r\n\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}